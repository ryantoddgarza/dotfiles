#!/bin/sh

# Close any open System Preferences panes to prevent them from overriding
# the settings that follow
osascript -e 'tell application "System Preferences" to quit'

# Immediately validate sudo user
sudo -v

# KEYBOARD, MOUSE, & TRACKPAD

# Disable press-and-hold for keys in favor of key repeat
defaults write NSGlobalDomain ApplePressAndHoldEnabled -bool false

# Set a fast keyboard repeat rate
defaults write NSGlobalDomain KeyRepeat -int 2
defaults write NSGlobalDomain InitialKeyRepeat -int 20

# POWER MANAGEMENT SETTINGS

# Restore defaults to overwrite any haphazard settings
# All pm settings to be made in this script
sudo pmset restoredefaults > /dev/null

# Sleep the display after 15 minutes while charging
sudo pmset -c displaysleep 15

# Disable machine sleep while charging
sudo pmset -c sleep 0

# Sleep the display after 2 minutes on battery
sudo pmset -b displaysleep 2

# Set machine sleep to 5 minutes on battery
sudo pmset -b sleep 5

# Set standby delay to 24 hours (default is 1 hour)
sudo pmset -a standbydelay 86400

# SCREEN

# Screencapture directory
screencapture_dir="${HOME}/Pictures/Screencapture"

# Create screencapture directory if it doesn't exist
mkdir -p $screencapture_dir

# Save screenshots to specified directory
defaults write com.apple.screencapture location -string "$screencapture_dir"

# Remove default timestamp
defaults write com.apple.screencapture "include-date" 0

# Save screenshots as jpg
defaults write com.apple.screencapture type -string "jpg"

# Prefix screenshots filename
defaults write com.apple.screencapture name -string "`hostname`-`date +"%Y%j_%H%M%S"`"

# Disable drop shadow
defaults write com.apple.screencapture disable-shadow -bool true

# FINDER

# Avoid creating .DS_Store files on network or USB volumes
defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true
defaults write com.apple.desktopservices DSDontWriteUSBStores -bool true
